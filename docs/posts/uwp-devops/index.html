<!DOCTYPE html>
<html lang="en-us">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta http-equiv="X-Clacks-Overhead" content="GNU Terry Pratchett" />
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="shortcut icon" href="http://localhost:1313/favicon.ico" />
<title>Setting up automated build and release pipeline for side-loaded UWP apps using Azure DevOps | Muhammad Azeez</title>
<meta name="title" content="Setting up automated build and release pipeline for side-loaded UWP apps using Azure DevOps" />
<meta name="description" content="This week we set up a CI/CD pipeline for one of our UWP apps that needs to be sideloaded because we don&rsquo;t publish it through the Microsoft Store. This article was super useful in getting me started. Microsoft has made things quite easy with Azure DevOps, but there were a few things that took us a little bit of time to figure out.
A little bit of context
We have an enterprise UWP application that we publish via an http server. We also have a custom auto-update mechanism that updates the apps whenever an update is available. You can learn more about the auto-updater here." />
<meta name="keywords" content="devops,uwp," />


<meta property="og:url" content="http://localhost:1313/posts/uwp-devops/">
  <meta property="og:site_name" content="Muhammad Azeez">
  <meta property="og:title" content="Setting up automated build and release pipeline for side-loaded UWP apps using Azure DevOps">
  <meta property="og:description" content="This week we set up a CI/CD pipeline for one of our UWP apps that needs to be sideloaded because we don’t publish it through the Microsoft Store. This article was super useful in getting me started. Microsoft has made things quite easy with Azure DevOps, but there were a few things that took us a little bit of time to figure out.
A little bit of context We have an enterprise UWP application that we publish via an http server. We also have a custom auto-update mechanism that updates the apps whenever an update is available. You can learn more about the auto-updater here.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2019-10-27T00:00:00+00:00">
    <meta property="article:modified_time" content="2019-10-27T00:00:00+00:00">
    <meta property="article:tag" content="Devops">
    <meta property="article:tag" content="Uwp">
    <meta property="og:image" content="http://localhost:1313/assets/images/cover.jpg">




  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="http://localhost:1313/assets/images/cover.jpg">
  <meta name="twitter:title" content="Setting up automated build and release pipeline for side-loaded UWP apps using Azure DevOps">
  <meta name="twitter:description" content="This week we set up a CI/CD pipeline for one of our UWP apps that needs to be sideloaded because we don’t publish it through the Microsoft Store. This article was super useful in getting me started. Microsoft has made things quite easy with Azure DevOps, but there were a few things that took us a little bit of time to figure out.
A little bit of context We have an enterprise UWP application that we publish via an http server. We also have a custom auto-update mechanism that updates the apps whenever an update is available. You can learn more about the auto-updater here.">




  <meta itemprop="name" content="Setting up automated build and release pipeline for side-loaded UWP apps using Azure DevOps">
  <meta itemprop="description" content="This week we set up a CI/CD pipeline for one of our UWP apps that needs to be sideloaded because we don’t publish it through the Microsoft Store. This article was super useful in getting me started. Microsoft has made things quite easy with Azure DevOps, but there were a few things that took us a little bit of time to figure out.
A little bit of context We have an enterprise UWP application that we publish via an http server. We also have a custom auto-update mechanism that updates the apps whenever an update is available. You can learn more about the auto-updater here.">
  <meta itemprop="datePublished" content="2019-10-27T00:00:00+00:00">
  <meta itemprop="dateModified" content="2019-10-27T00:00:00+00:00">
  <meta itemprop="wordCount" content="1352">
  <meta itemprop="image" content="http://localhost:1313/assets/images/cover.jpg">
  <meta itemprop="keywords" content="Devops,Uwp">
<meta name="referrer" content="no-referrer-when-downgrade" />

  <style>
  :root {
    --width: 720px;
    --font-main: Verdana, sans-serif;
    --font-secondary: Verdana, sans-serif;
    --font-scale: 1em;
    --background-color: #fff;
    --heading-color: #222;
    --text-color: #444;
    --link-color: #3273dc;
    --visited-color: #8b6fcb;
    --blockquote-color: #222;
  }

  @media (prefers-color-scheme: dark) {
    :root {
      --background-color: #01242e;
      --heading-color: #eee;
      --text-color: #ddd;
      --link-color: #8cc2dd;
      --visited-color: #8b6fcb;
      --blockquote-color: #ccc;
    }
  }

  body {
    font-family: var(--font-secondary);
    font-size: var(--font-scale);
    margin: auto;
    padding: 20px;
    max-width: var(--width);
    text-align: left;
    background-color: var(--background-color);
    word-wrap: break-word;
    overflow-wrap: break-word;
    line-height: 1.5;
    color: var(--text-color);
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-family: var(--font-main);
    color: var(--heading-color);
  }

  a {
    color: var(--link-color);
    cursor: pointer;
    text-decoration: none;
  }

  a:hover {
    text-decoration: underline;
  }

  nav a {
    margin-right: 8px;
  }

  strong,
  b {
    color: var(--heading-color);
  }

  button {
    margin: 0;
    cursor: pointer;
  }

  time {
    font-family: monospace;
    font-style: normal;
    font-size: 15px;
  }

  main {
    line-height: 1.6;
  }

  table {
    width: 100%;
  }

  hr {
    border: 0;
    border-top: 1px dashed;
  }

  img {
    max-width: 100%;
  }

  code {
    font-family: monospace;
    padding: 2px;
    border-radius: 3px;
  }

  blockquote {
    border-left: 1px solid #999;
    color: var(--blockquote-color);
    padding-left: 20px;
    font-style: italic;
  }

  footer {
    padding: 25px 0;
    text-align: center;
  }

  .title:hover {
    text-decoration: none;
  }

  .title h1 {
    font-size: 1.5em;
  }

  .inline {
    width: auto !important;
  }

  .highlight,
  .code {
    border-radius: 3px;
    margin-block-start: 1em;
    margin-block-end: 1em;
    overflow-x: auto;
  }

   
  ul.blog-posts {
    list-style-type: none;
    padding: unset;
  }

  ul.blog-posts li {
    display: flex;
  }

  ul.blog-posts li span {
    flex: 0 0 130px;
  }

  ul.blog-posts li a:visited {
    color: var(--visited-color);
  }

</style>
<link rel="stylesheet" href="/assets/css/highlight.css">
<link rel="stylesheet" href="/assets/css/override.css">
<script defer src="https://cdn.jsdelivr.net/npm/chart.js@4.4.6/dist/chart.umd.min.js"></script>
</head>

<body>
  <header><div class="site-brand site-brand--inline">
  <a href="/" class="title">
    <h2>Muhammad Azeez</h2>
  </a>
  <nav class="site-nav"><a href="/">Home</a>
<a href="/about/">About</a>
</nav>
</div>
</header>
  <main>
<h1>Setting up automated build and release pipeline for side-loaded UWP apps using Azure DevOps</h1>
<p>
  <i>
    <time datetime='2019-10-27'>
      27 Oct 2019
    </time>
  </i>
</p>
<content>
  <p>This week we set up a CI/CD pipeline for one of our UWP apps that needs to be sideloaded because we don&rsquo;t publish it through the Microsoft Store. <a href="https://docs.microsoft.com/en-us/windows/uwp/packaging/auto-build-package-uwp-apps">This article</a> was super useful in getting me started. Microsoft has made things quite easy with Azure DevOps, but there were a few things that took us a little bit of time to figure out.</p>
<h2 id="a-little-bit-of-context">A little bit of context</h2>
<p>We have an enterprise UWP application that we publish via an http server. We also have a custom auto-update mechanism that updates the apps whenever an update is available. You can learn more about the <a href="https://mazeez.dev/posts/update-sideloaded-uwp">auto-updater here</a>.</p>
<p>So what we needed, is a build pipeline that builds the app for both <code>x64</code> and <code>x86</code> and generate an index.html page, <code>appinstaller</code> file and the <code>msixbundle</code> files for both the app and its dependencies.</p>
<h2 id="the-plan">The plan</h2>
<ol>
<li>Setup a build pipeline to generate update package and increase version</li>
<li>Set up a release pipeline to upload the update package via FTP</li>
<li>Celebrate</li>
</ol>
<h1 id="1-setting-up-a-build-pipeline">1. Setting up a build pipeline</h1>
<p><a href="https://docs.microsoft.com/en-us/windows/uwp/packaging/auto-build-package-uwp-apps">This article</a> provides most of the information needed. But I have a few notes:</p>
<h3 id="11-use-self-hosted-agents">1.1 Use self hosted agents</h3>
<p>Unfortunately, it seems like Microsoft hosted agents <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/agents/hosted?view=azure-devops#capabilities-and-limitations">are not powerful enough</a> to build release modes of moderate to big UWP applications. Because in release mode, it has to compile the app natively and so uses the native compilation toolchain. In our experience, the native compilation toolchain requires at least 8 GB of RAM to work properly. For our app, the Microsft hosted agents had a build success rate of less than 50%. They fail because <a href="https://dev.to/encrypt0r/solving-nutcdriver-exe-returned-code-1-error-while-building-uwp-app-in-release-mode-2mc6">of memory usage issues</a>.</p>
<p>Besides, hosted agents are much faster. Microsoft hosted agents would take about 45 minutes to build our app, our own hosted agents usually take about 10 minutes. This is partly because they use incremental build, instead of a clean build every time they need to build the app.</p>
<p>So you have to use your own hosted agents. You use your own machines or virtual machines to build the application. Adding an agent to a pool is very easy:</p>
<ol>
<li>Go to project settings &gt; Agent Pools</li>
<li>Click on &ldquo;Default&rdquo; or create another pool</li>
<li>Click on &ldquo;New Agent&rdquo; and follow the instructions</li>
</ol>
<p>Now you will need to tell the build pipeline to use your self-hosted agents.
You can specify the pool name very easily in yaml:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#062873;font-weight:bold">pool</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#bbb">  </span><span style="color:#062873;font-weight:bold">name</span>:<span style="color:#bbb"> </span><span style="color:#4070a0">&#34;Default&#34;</span><span style="color:#bbb">
</span></span></span></code></pre></div><p>You might also want to use the 64 bit compiler, for that add this xml snippet a <code>PropertyGroup</code> in your project&rsquo;s <code>csproj</code> file:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#062873;font-weight:bold">&lt;Use64Bitcompiler&gt;</span>true<span style="color:#062873;font-weight:bold">&lt;/Use64Bitcompiler&gt;</span>
</span></span></code></pre></div><h3 id="12-use-nuget-version-4x">1.2 Use Nuget version <code>4.x</code></h3>
<p>For some reason, not specifying Nuget version leads to the failure of the build.</p>
<h3 id="13-using-extension-sdks-with-a-build-pipeline">1.3 Using Extension SDKs with a build pipeline</h3>
<blockquote>
<p>An Extension SDK is similar in concept to a regular assembly reference, but is instead a rich collection of files to cover various configurations and design time scenarios.</p>
</blockquote>
<p>If you&rsquo;re using an SDK reference, for example if you use <a href="https://marketplace.visualstudio.com/items?itemName=SQLiteDevelopmentTeam.SQLiteforUniversalWindowsPlatform">SQLite for UWP</a>, you must include the SDK with the source code and tell MSBuild to use the local version before searching for the SDK in the global folder. <a href="https://oren.codes/2012/03/24/how-to-use-extension-sdks-per-project/">This article</a> explains the steps, but here is a summary:</p>
<ol>
<li>Create a folder beside your solution file and call it <code>SDKs</code>.</li>
<li>Copy UAP folder from <code>C:\Program Files (x86)\Microsoft SDKs</code> into the <code>SDKs</code> folder beside your solution file.</li>
<li>Add this snippet to the <code>.csproj</code> file:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#062873;font-weight:bold">&lt;PropertyGroup&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>  <span style="color:#062873;font-weight:bold">&lt;SDKReferenceDirectoryRoot&gt;</span>$(SolutionDir)\SDKs;$(SDKReferenceDirectoryRoot)<span style="color:#062873;font-weight:bold">&lt;/SDKReferenceDirectoryRoot&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#062873;font-weight:bold">&lt;/PropertyGroup&gt;</span>
</span></span></code></pre></div><h3 id="14-versioning-the-packages">1.4 Versioning the packages</h3>
<p>Usually the version of the package is stored inside <code>Package.appxmanifest</code> and auto-incremented by Visual Studio. But this requires you to commit the changes to make sure you don&rsquo;t reuse versions.</p>
<p>I am not comfortable with build pipelines committing changes to source code. Fortunately there are a few extensions for Azure DevOps that can help with this. The one I decided to use is <a href="https://marketplace.visualstudio.com/items?itemName=maikvandergaag.maikvandergaag-versioncounter">Version Number counter</a>. <a href="https://msftplayground.com/2018/11/version-number-counter-for-azure-devops/">This article</a> does a great job of explaining how you can use it.</p>
<p>What we can do is have a PowerShell script  update the app manifest file:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#60a0b0;font-style:italic"># https://stackoverflow.com/a/42699995</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#bb60d5">$xmlFileName</span> = <span style="color:#4070a0">&#34;</span>$(Build.SourcesDirectory)<span style="color:#4070a0">\{ProjectName}\Package.appxmanifest&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>      
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>[<span style="color:#60add5">xml</span>]<span style="color:#bb60d5">$xmlDoc</span> = <span style="color:#007020">Get-Content</span> <span style="color:#bb60d5">$xmlFileName</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span><span style="color:#bb60d5">$xmlDoc</span>.Package.Identity.Version = <span style="color:#4070a0">&#34;</span><span style="color:#bb60d5">$env:appVersion</span><span style="color:#4070a0">.0&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span><span><span style="color:#007020">echo </span><span style="color:#4070a0">&#39;New version:&#39;</span> <span style="color:#bb60d5">$xmlDoc</span>.Package.Identity.Version
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9</span><span><span style="color:#bb60d5">$xmlDoc</span>.Save(<span style="color:#bb60d5">$xmlFileName</span>)
</span></span></code></pre></div><p>For that you need to define a variable called <code>appVersion</code> with the initial version in this format: <code>1.0.0</code>. Because UWP package version format is like <code>1.0.0.0</code>, you have to concatenate another &ldquo;0&rdquo; at the end of <code>appVersion</code>.</p>
<p>If you&rsquo;re a desktop developer, you might not like PowerShell or bash scripts. But they are very powerful and flexible for automation scenarios.</p>
<h3 id="15-use-templates">1.5 Use templates</h3>
<p>Sometimes you have multiple configurations and environments you want to build for. We wanted to be able to build for both Production and Staging environments. Each of which have different build configuration (Release, Debug, Staging&hellip;), supported different build platforms (x86, x64, ARM), had different auto-update URLs, etc..</p>
<p>Azure DevOps yaml files support templates. You define a base template and put all of the common steps and jobs there, then you define a bunch of parameters for the template so that the pipelines that inherit from the base template can configure these parameters.</p>
<h2 id="the-code">The code</h2>
<p><code>Template.yaml</code></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  1</span><span><span style="color:#062873;font-weight:bold">parameters</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  2</span><span><span style="color:#bbb">    </span><span style="color:#60a0b0;font-style:italic"># Platforms to generate bundles for: x86, x64, x86|x64</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  3</span><span><span style="color:#bbb">    </span><span style="color:#062873;font-weight:bold">buildPlatform</span>:<span style="color:#bbb"> </span><span style="color:#4070a0">&#39;x86|x64&#39;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  4</span><span><span style="color:#bbb">    </span><span style="color:#60a0b0;font-style:italic"># Platforms to generate bundles for (Debug, Release...)</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  5</span><span><span style="color:#bbb">    </span><span style="color:#062873;font-weight:bold">buildConfiguration</span>:<span style="color:#bbb"> </span><span style="color:#4070a0">&#39;Release&#39;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  6</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  7</span><span><span style="color:#bbb">    </span><span style="color:#60a0b0;font-style:italic"># Where will the installer be uploaded to?</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  8</span><span><span style="color:#bbb">    </span><span style="color:#062873;font-weight:bold">installerUrl</span>:<span style="color:#bbb"> </span><span style="color:#4070a0">&#39;Replace this by the actual URL&#39;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  9</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 10</span><span><span style="color:#bbb">    </span><span style="color:#60a0b0;font-style:italic"># The version of the app</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 11</span><span><span style="color:#bbb">    </span><span style="color:#062873;font-weight:bold">appVersion</span>:<span style="color:#bbb"> </span><span style="color:#4070a0">&#39;1.1.1&#39;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 12</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 13</span><span><span style="color:#bbb">    </span><span style="color:#062873;font-weight:bold">solution</span>:<span style="color:#bbb"> </span><span style="color:#4070a0">&#39;{ProjectName}.sln&#39;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 14</span><span><span style="color:#bbb">    </span><span style="color:#062873;font-weight:bold">appxPackageDir</span>:<span style="color:#bbb"> </span><span style="color:#4070a0">&#39;$(build.artifactStagingDirectory)\AppxPackages\\&#39;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 15</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 16</span><span><span style="color:#bbb"></span><span style="color:#062873;font-weight:bold">steps</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 17</span><span><span style="color:#bbb"></span>- <span style="color:#062873;font-weight:bold">task</span>:<span style="color:#bbb"> </span>PowerShell@2<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 18</span><span><span style="color:#bbb">  </span><span style="color:#062873;font-weight:bold">env</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 19</span><span><span style="color:#bbb">    </span><span style="color:#062873;font-weight:bold">appVersion</span>:<span style="color:#bbb"> </span>${{ parameters.appVersion }}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 20</span><span><span style="color:#bbb">    </span><span style="color:#062873;font-weight:bold">buildPlatform</span>:<span style="color:#bbb"> </span>${{ parameters.buildPlatform }}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 21</span><span><span style="color:#bbb">    </span><span style="color:#062873;font-weight:bold">buildConfiguration</span>:<span style="color:#bbb"> </span>${{ parameters.buildConfiguration }}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 22</span><span><span style="color:#bbb">    </span><span style="color:#062873;font-weight:bold">installerUrl</span>:<span style="color:#bbb"> </span>${{ parameters.installerUrl }}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 23</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 24</span><span><span style="color:#bbb">  </span><span style="color:#062873;font-weight:bold">displayName</span>:<span style="color:#bbb"> </span><span style="color:#4070a0">&#39;Print variables&#39;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 25</span><span><span style="color:#bbb">  </span><span style="color:#062873;font-weight:bold">inputs</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 26</span><span><span style="color:#bbb">    </span><span style="color:#062873;font-weight:bold">targetType</span>:<span style="color:#bbb"> </span><span style="color:#4070a0">&#39;inline&#39;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 27</span><span><span style="color:#bbb">    </span><span style="color:#062873;font-weight:bold">script</span>:<span style="color:#bbb"> </span>|<span style="color:#4070a0;font-style:italic">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 28</span><span><span style="color:#4070a0;font-style:italic">      echo &#34;appVersion: $env:appVersion&#34;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 29</span><span><span style="color:#4070a0;font-style:italic">      echo &#34;buildPlatform: $env:buildPlatform&#34;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 30</span><span><span style="color:#4070a0;font-style:italic">      echo &#34;buildConfiguration: $env:buildConfiguration&#34;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 31</span><span><span style="color:#4070a0;font-style:italic">      echo &#34;installerUrl: $env:installerUrl&#34;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 32</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 33</span><span><span style="color:#bbb"></span>- <span style="color:#062873;font-weight:bold">task</span>:<span style="color:#bbb"> </span>versioncounter@1<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 34</span><span><span style="color:#bbb">  </span><span style="color:#062873;font-weight:bold">inputs</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 35</span><span><span style="color:#bbb">    </span><span style="color:#062873;font-weight:bold">VersionVariable</span>:<span style="color:#bbb"> </span><span style="color:#4070a0">&#39;appVersion&#39;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 36</span><span><span style="color:#bbb">    </span><span style="color:#062873;font-weight:bold">UpdateMinorVersion</span>:<span style="color:#bbb"> </span><span style="color:#007020;font-weight:bold">true</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 37</span><span><span style="color:#bbb">    </span><span style="color:#062873;font-weight:bold">DevOpsPat</span>:<span style="color:#bbb"> </span><span style="color:#4070a0">&#39;{Your_PAT}&#39;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 38</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 39</span><span><span style="color:#bbb"></span>- <span style="color:#062873;font-weight:bold">task</span>:<span style="color:#bbb"> </span>PowerShell@2<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 40</span><span><span style="color:#bbb">  </span><span style="color:#062873;font-weight:bold">env</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 41</span><span><span style="color:#bbb">    </span><span style="color:#062873;font-weight:bold">appVersion</span>:<span style="color:#bbb"> </span>${{ parameters.appVersion }}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 42</span><span><span style="color:#bbb">  </span><span style="color:#062873;font-weight:bold">displayName</span>:<span style="color:#bbb"> </span><span style="color:#4070a0">&#39;Replace Version Number in the manifest file&#39;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 43</span><span><span style="color:#bbb">  </span><span style="color:#062873;font-weight:bold">inputs</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 44</span><span><span style="color:#bbb">    </span><span style="color:#062873;font-weight:bold">targetType</span>:<span style="color:#bbb"> </span><span style="color:#4070a0">&#39;inline&#39;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 45</span><span><span style="color:#bbb">    </span><span style="color:#062873;font-weight:bold">script</span>:<span style="color:#bbb"> </span>|<span style="color:#4070a0;font-style:italic">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 46</span><span><span style="color:#4070a0;font-style:italic">      # https://stackoverflow.com/a/42699995
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 47</span><span><span style="color:#4070a0;font-style:italic">      $xmlFileName = &#34;$(Build.SourcesDirectory)\{ProjectName}\Package.appxmanifest&#34;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 48</span><span><span style="color:#4070a0;font-style:italic">      
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 49</span><span><span style="color:#4070a0;font-style:italic">      [xml]$xmlDoc = Get-Content $xmlFileName
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 50</span><span><span style="color:#4070a0;font-style:italic">      $xmlDoc.Package.Identity.Version = &#34;$env:appVersion.0&#34;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 51</span><span><span style="color:#4070a0;font-style:italic">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 52</span><span><span style="color:#4070a0;font-style:italic">      echo &#39;New version:&#39; $xmlDoc.Package.Identity.Version
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 53</span><span><span style="color:#4070a0;font-style:italic">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 54</span><span><span style="color:#4070a0;font-style:italic">      $xmlDoc.Save($xmlFileName)</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 55</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 56</span><span><span style="color:#bbb"></span>- <span style="color:#062873;font-weight:bold">task</span>:<span style="color:#bbb"> </span>NuGetToolInstaller@1<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 57</span><span><span style="color:#bbb">  </span><span style="color:#062873;font-weight:bold">inputs</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 58</span><span><span style="color:#bbb">    </span><span style="color:#062873;font-weight:bold">versionSpec</span>:<span style="color:#bbb"> </span><span style="color:#4070a0">&#39;4.9.2&#39;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 59</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 60</span><span><span style="color:#bbb"></span>- <span style="color:#062873;font-weight:bold">task</span>:<span style="color:#bbb"> </span>NuGetCommand@2<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 61</span><span><span style="color:#bbb">  </span><span style="color:#062873;font-weight:bold">inputs</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 62</span><span><span style="color:#bbb">    </span><span style="color:#062873;font-weight:bold">command</span>:<span style="color:#bbb"> </span><span style="color:#4070a0">&#39;restore&#39;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 63</span><span><span style="color:#bbb">    </span><span style="color:#062873;font-weight:bold">restoreSolution</span>:<span style="color:#bbb"> </span><span style="color:#4070a0">&#39;${{ parameters.solution }}&#39;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 64</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 65</span><span><span style="color:#bbb"></span>- <span style="color:#062873;font-weight:bold">task</span>:<span style="color:#bbb"> </span>VSBuild@1<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 66</span><span><span style="color:#bbb">  </span><span style="color:#062873;font-weight:bold">inputs</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 67</span><span><span style="color:#bbb">    </span><span style="color:#062873;font-weight:bold">solution</span>:<span style="color:#bbb"> </span><span style="color:#4070a0">&#39;${{ parameters.solution }}&#39;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 68</span><span><span style="color:#bbb">    </span><span style="color:#062873;font-weight:bold">msbuildArgs</span>:<span style="color:#bbb"> </span><span style="color:#4070a0">&#39;/p:AppxBundlePlatforms=&#34;${{ parameters.buildPlatform}}&#34; /p:AppxPackageDir=&#34;${{ parameters.appxPackageDir}}&#34; /p:AppxBundle=Always /p:UapAppxPackageBuildMode=SideloadOnly&#39;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 69</span><span><span style="color:#bbb">    </span><span style="color:#062873;font-weight:bold">platform</span>:<span style="color:#bbb"> </span><span style="color:#4070a0">&#39;x64&#39;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 70</span><span><span style="color:#bbb">    </span><span style="color:#062873;font-weight:bold">configuration</span>:<span style="color:#bbb"> </span><span style="color:#4070a0">&#39;${{ parameters.buildConfiguration }}&#39;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 71</span><span><span style="color:#bbb">    </span><span style="color:#062873;font-weight:bold">msbuildArchitecture</span>:<span style="color:#bbb"> </span><span style="color:#4070a0">&#39;x64&#39;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 72</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 73</span><span><span style="color:#bbb"></span>- <span style="color:#062873;font-weight:bold">task</span>:<span style="color:#bbb"> </span>PowerShell@2<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 74</span><span><span style="color:#bbb">  </span><span style="color:#062873;font-weight:bold">env</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 75</span><span><span style="color:#bbb">    </span><span style="color:#062873;font-weight:bold">installerUrl</span>:<span style="color:#bbb"> </span>${{ parameters.installerUrl }}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 76</span><span><span style="color:#bbb">  </span><span style="color:#062873;font-weight:bold">displayName</span>:<span style="color:#bbb"> </span><span style="color:#4070a0">&#39;Replace installer url&#39;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 77</span><span><span style="color:#bbb">  </span><span style="color:#062873;font-weight:bold">inputs</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 78</span><span><span style="color:#bbb">    </span><span style="color:#062873;font-weight:bold">targetType</span>:<span style="color:#bbb"> </span><span style="color:#4070a0">&#39;inline&#39;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 79</span><span><span style="color:#bbb">    </span><span style="color:#062873;font-weight:bold">script</span>:<span style="color:#bbb"> </span>|<span style="color:#4070a0;font-style:italic">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 80</span><span><span style="color:#4070a0;font-style:italic">      # https://stackoverflow.com/a/17144445
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 81</span><span><span style="color:#4070a0;font-style:italic">      $fileName = &#34;$(build.artifactStagingDirectory)\AppxPackages\{ProjectName}.appinstaller&#34;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 82</span><span><span style="color:#4070a0;font-style:italic">      
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 83</span><span><span style="color:#4070a0;font-style:italic">      $original = &#34;{Original Url in the .appinstaller file}&#34;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 84</span><span><span style="color:#4070a0;font-style:italic">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 85</span><span><span style="color:#4070a0;font-style:italic">      $content = Get-Content $fileName
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 86</span><span><span style="color:#4070a0;font-style:italic">      $content = $content.replace($original, $env:installerUrl)
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 87</span><span><span style="color:#4070a0;font-style:italic">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 88</span><span><span style="color:#4070a0;font-style:italic">      Set-Content -Path $fileName -Value $content
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 89</span><span><span style="color:#4070a0;font-style:italic">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 90</span><span><span style="color:#4070a0;font-style:italic">      echo &#39;Install Url:&#39; $env:installerUrl</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 91</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 92</span><span><span style="color:#bbb"></span>- <span style="color:#062873;font-weight:bold">task</span>:<span style="color:#bbb"> </span>CopyFiles@2<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 93</span><span><span style="color:#bbb">  </span><span style="color:#062873;font-weight:bold">displayName: &#39;Copy Files to</span>:<span style="color:#bbb"> </span>$(build.artifactstagingdirectory)&#39;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 94</span><span><span style="color:#bbb">  </span><span style="color:#062873;font-weight:bold">inputs</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 95</span><span><span style="color:#bbb">    </span><span style="color:#062873;font-weight:bold">SourceFolder</span>:<span style="color:#bbb"> </span><span style="color:#4070a0">&#39;$(system.defaultworkingdirectory)&#39;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 96</span><span><span style="color:#bbb">    </span><span style="color:#062873;font-weight:bold">Contents</span>:<span style="color:#bbb"> </span><span style="color:#4070a0">&#39;**\bin\${{ parameters.buildConfiguration }}\**&#39;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 97</span><span><span style="color:#bbb">    </span><span style="color:#062873;font-weight:bold">TargetFolder</span>:<span style="color:#bbb"> </span><span style="color:#4070a0">&#39;$(build.artifactstagingdirectory)&#39;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 98</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 99</span><span><span style="color:#bbb"></span>- <span style="color:#062873;font-weight:bold">task</span>:<span style="color:#bbb"> </span>PublishBuildArtifacts@1<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">100</span><span><span style="color:#bbb">  </span><span style="color:#062873;font-weight:bold">displayName: &#39;Publish Artifact</span>:<span style="color:#bbb"> </span>drop&#39;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">101</span><span><span style="color:#bbb">  </span><span style="color:#062873;font-weight:bold">inputs</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">102</span><span><span style="color:#bbb">    </span><span style="color:#062873;font-weight:bold">PathtoPublish</span>:<span style="color:#bbb"> </span><span style="color:#4070a0">&#39;$(build.artifactstagingdirectory)&#39;</span><span style="color:#bbb">
</span></span></span></code></pre></div><p><code>Staging.yml</code></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#60a0b0;font-style:italic"># Staging</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#bbb"></span><span style="color:#062873;font-weight:bold">trigger</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span><span style="color:#bbb"> </span>- master<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#bbb"></span><span style="color:#062873;font-weight:bold">pool</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span><span style="color:#bbb">  </span><span style="color:#062873;font-weight:bold">name</span>:<span style="color:#bbb"> </span><span style="color:#4070a0">&#34;Default&#34;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#bbb"></span><span style="color:#062873;font-weight:bold">steps</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#bbb">    </span>- <span style="color:#062873;font-weight:bold">template</span>:<span style="color:#bbb"> </span>Template.yml<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#bbb">      </span><span style="color:#062873;font-weight:bold">parameters</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#bbb">        </span><span style="color:#062873;font-weight:bold">buildPlatform</span>:<span style="color:#bbb"> </span><span style="color:#4070a0">&#39;x64&#39;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#bbb">        </span><span style="color:#062873;font-weight:bold">buildConfiguration</span>:<span style="color:#bbb"> </span><span style="color:#4070a0">&#39;Release&#39;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span><span style="color:#bbb">        </span><span style="color:#062873;font-weight:bold">installerUrl</span>:<span style="color:#bbb"> </span><span style="color:#4070a0">&#39;{Staging_URL}&#39;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span><span style="color:#bbb">        </span><span style="color:#062873;font-weight:bold">appVersion</span>:<span style="color:#bbb"> </span>$(appVersion)<span style="color:#bbb">
</span></span></span></code></pre></div><p><code>Production.yml</code></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#60a0b0;font-style:italic"># Production</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#bbb"></span><span style="color:#062873;font-weight:bold">trigger</span>:<span style="color:#bbb"> </span>none<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span><span style="color:#bbb"></span><span style="color:#062873;font-weight:bold">pool</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#bbb">  </span><span style="color:#062873;font-weight:bold">name</span>:<span style="color:#bbb"> </span><span style="color:#4070a0">&#34;Default&#34;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#bbb"></span><span style="color:#062873;font-weight:bold">steps</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#bbb">    </span>- <span style="color:#062873;font-weight:bold">template</span>:<span style="color:#bbb"> </span>Template.yml<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#bbb">      </span><span style="color:#062873;font-weight:bold">parameters</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#bbb">        </span><span style="color:#062873;font-weight:bold">buildPlatform</span>:<span style="color:#bbb"> </span><span style="color:#4070a0">&#39;x86|x64&#39;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#bbb">        </span><span style="color:#062873;font-weight:bold">buildConfiguration</span>:<span style="color:#bbb"> </span><span style="color:#4070a0">&#39;Release&#39;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#bbb">        </span><span style="color:#062873;font-weight:bold">installerUrl</span>:<span style="color:#bbb"> </span><span style="color:#4070a0">&#39;{Production_URL}&#39;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span><span style="color:#bbb">        </span><span style="color:#062873;font-weight:bold">appVersion</span>:<span style="color:#bbb"> </span>$(appVersion)<span style="color:#bbb">
</span></span></span></code></pre></div><h1 id="2-setup-a-release-pipeline">2. Setup a release pipeline</h1>
<p>The release pipeline is very easy, since all of the hard work is done in the build pipeline. The only thing you have to do is:</p>
<ol>
<li>
<p>Get the build artifacts from the build pipeline. You can do that by clicking &ldquo;Artifacts&rdquo; part. Select &ldquo;Build&rdquo; from &ldquo;Source Type&rdquo; and select the appropriate build pipeline.</p>
</li>
<li>
<p>Upload the <code>index.html</code>, <code>{ProjectName}.appinstaller</code> and the package folder to the update website via FTP. Azure DevOps has a built-in task for FTP upload.</p>
</li>
</ol>
<h1 id="3-celebrate-">3. Celebrate 🎉</h1>
<p>The title pretty much says it all.</p>
<hr>
<p>Update 04/25/2020:</p>
<p>You can use the <a href="https://marketplace.visualstudio.com/items?itemName=stefankert.codesigning">Code Signing Task</a> for signing your WUP app easily and securely.</p>

</content>



<p>
  
  <a href="http://localhost:1313/tags/devops/">#devops</a>

  
  <a href="http://localhost:1313/tags/uwp/">#uwp</a>

  
</p>



<section class="related-posts">
  <h3>Keep reading</h3>
  <ul>
    
    <li>
      <a href="http://localhost:1313/posts/update-sideloaded-uwp-2/">&#39;Enabling automatic updates for sideloaded UWP apps: Multiple update channels&#39;</a>
      <span class="related-posts__date">
        25 Apr 2020
      </span>
    </li>
    
    <li>
      <a href="http://localhost:1313/posts/update-sideloaded-uwp/">Enabling automatic updates for sideloaded UWP apps</a>
      <span class="related-posts__date">
        28 Dec 2018
      </span>
    </li>
    
    <li>
      <a href="http://localhost:1313/posts/how-to-get-an-instance-of-a-page-when-you-navigate-to-it-in-uwp/">How to get an instance of a page when you navigate to it in UWP</a>
      <span class="related-posts__date">
        26 May 2019
      </span>
    </li>
    
    <li>
      <a href="http://localhost:1313/posts/periodic-backups-potsgresql-s3-cron/">Automatic periodic backups from PostgreSQL to S3 using Cron</a>
      <span class="related-posts__date">
        29 Jan 2022
      </span>
    </li>
    
  </ul>
</section>


  </main>
  <footer><div class="footer-links">
  <a href="/">Home</a> · <a href="/about/">About</a>
</div>
<div class="footer-credit">Made with <a href="https://github.com/janraasch/hugo-bearblog/">Hugo ʕ•ᴥ•ʔ Bear</a></div>
</footer>

  
</body>

</html>
